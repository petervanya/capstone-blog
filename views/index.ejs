<%- include('partials/header') %>

<div class="container">
  <h1>All Articles</h1>
  
  <% if (typeof error !== 'undefined' && error) { %>
    <div class="error-message">
      <p><%= error %></p>
    </div>
  <% } %>
  
  <div id="posts-container">
    <% if (posts && posts.length > 0) { %>
      <% posts.forEach(post => { %>
        <article class="post-card">
          <h2><%= post.title %></h2>
          <p class="post-meta">Created: <%= new Date(post.created_at).toLocaleDateString() %></p>
          <p class="post-content"><%= post.content %></p>
          <div class="post-actions">
            <a href="/edit/<%= post.id %>" class="btn btn-edit">Edit</a>
            <form action="/delete/<%= post.id %>" method="POST" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this post?')">
              <button type="submit" class="btn btn-delete">Delete</button>
            </form>
          </div>
        </article>
      <% }); %>
    <% } else { %>
      <div class="no-posts">
        <p>No articles found. <a href="/post">Create your first article!</a></p>
      </div>
    <% } %>
  </div>
</div>

<%- include('partials/footer') %>